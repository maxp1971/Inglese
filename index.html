<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>English Bunny World</title>

<script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<style>
:root{
--bg:#fdf4ff;
--card:#ffffff;
--primary:#7c3aed;
--secondary:#f472b6;
--green:#22c55e;
--red:#ef4444;
--soft:#f3f4f6;
}

body{
margin:0;
font-family:'Comic Sans MS','Segoe UI',sans-serif;
background:linear-gradient(180deg,#ffe4ec,#e0f2ff);
min-height:100vh;
}

.container{max-width:700px;margin:auto;padding:20px;}

.header{
text-align:center;
margin-bottom:15px;
}

.bunny{
font-size:60px;
animation:bounce 1s infinite alternate;
}

@keyframes bounce{
from{transform:translateY(0);}
to{transform:translateY(-8px);}
}

.card{
background:var(--card);
border-radius:20px;
padding:20px;
box-shadow:0 6px 18px rgba(0,0,0,0.1);
margin-bottom:15px;
}

button{
border:none;
border-radius:18px;
padding:14px;
font-size:18px;
cursor:pointer;
font-weight:bold;
margin:6px 0;
width:100%;
}

.level-btn{
background:var(--primary);
color:white;
}

.locked{
background:#ddd;
color:#999;
}

.option{
background:var(--soft);
}

.correct{background:var(--green);color:white;}
.wrong{background:var(--red);color:white;}

.progress{
height:10px;
background:#ddd;
border-radius:20px;
overflow:hidden;
margin-bottom:15px;
}

.bar{
height:100%;
background:var(--secondary);
transition:width 0.3s;
}

.stats{
text-align:center;
font-size:18px;
margin-bottom:10px;
}

input{
width:100%;
padding:12px;
border-radius:12px;
border:2px solid var(--primary);
font-size:18px;
margin-top:10px;
}

</style>
</head>

<body>
<div id="root"></div>

<script type="text/babel">

const {useState,useEffect} = React;

const shuffle = arr => [...arr].sort(()=>Math.random()-0.5);

const today = () => new Date().toDateString();

const data = [
{name:"Animals",items:[
{name:"Cat",emoji:"üê±"},
{name:"Dog",emoji:"üê∂"},
{name:"Lion",emoji:"ü¶Å"},
{name:"Elephant",emoji:"üêò"}
]},
{name:"Family",items:[
{name:"Mom",emoji:"üë©"},
{name:"Dad",emoji:"üë®"},
{name:"Brother",emoji:"üë¶"},
{name:"Sister",emoji:"üëß"},
{name:"Grandmother",emoji:"üëµ"},
{name:"Grandfather",emoji:"üë¥"}
]},
{name:"Food",items:[
{name:"Pizza",emoji:"üçï"},
{name:"Milk",emoji:"ü•õ"},
{name:"Apple",emoji:"üçé"},
{name:"Cake",emoji:"üç∞"}
]}
];

function App(){

const [level,setLevel]=useState(null);
const [question,setQuestion]=useState(null);
const [progress,setProgress]=useState(0);
const [stars,setStars]=useState(parseInt(localStorage.getItem("stars"))||0);
const [lives,setLives]=useState(3);
const [feedback,setFeedback]=useState(null);
const [streak,setStreak]=useState(parseInt(localStorage.getItem("streak"))||0);
const [lastDay,setLastDay]=useState(localStorage.getItem("lastDay"));
const [completed,setCompleted]=useState(JSON.parse(localStorage.getItem("completed"))||[]);

useEffect(()=>{localStorage.setItem("stars",stars)},[stars]);
useEffect(()=>{localStorage.setItem("completed",JSON.stringify(completed))},[completed]);
useEffect(()=>{localStorage.setItem("streak",streak)},[streak]);

useEffect(()=>{
if(lastDay!==today()){
if(lastDay){
setStreak(s=>s+1);
setStars(s=>s+10);
}
localStorage.setItem("lastDay",today());
}
},[]);

const speak=text=>{
const u=new SpeechSynthesisUtterance(text);
u.lang="en-US";
speechSynthesis.speak(u);
};

const startLevel=(i)=>{
setLevel(i);
setProgress(0);
setLives(3);
nextQuestion(i,0);
};

const nextQuestion=(i,p)=>{
const items=data[i].items;
const correct=items[Math.floor(Math.random()*items.length)];
const options=shuffle([correct,...shuffle(items).slice(0,3)]);
setQuestion({correct,options});
setProgress(p);
setFeedback(null);
speak(correct.name);
};

const checkAnswer=(ans)=>{
if(ans===question.correct.name){
setFeedback("correct");
setStars(s=>s+5);
setTimeout(()=>{
if(progress+1>=5){
setCompleted([...new Set([...completed,level])]);
alert("Level Complete! üèÜ");
setLevel(null);
}else{
nextQuestion(level,progress+1);
}
},600);
}else{
setFeedback("wrong");
setLives(l=>l-1);
if(lives-1<=0){
setTimeout(()=>{alert("Game Over ü•∫");setLevel(null)},600);
}
}
};

if(level===null)
return(
<div className="container">
<div className="header">
<div className="bunny">üê∞</div>
<h1 style={{color:"#7c3aed"}}>English Bunny World</h1>
<div className="stats">‚≠ê {stars} | üî• {streak}</div>
</div>

{data.map((lvl,i)=>{
const unlocked = i===0 || completed.includes(i-1);
return(
<div key={i} className="card">
<button
className={unlocked?"level-btn":"locked"}
disabled={!unlocked}
onClick={()=>startLevel(i)}>
{lvl.name} {completed.includes(i)?"üèÜ":""}
</button>
</div>
)
})}

</div>
);

return(
<div className="container">
<div className="card">
<div className="progress">
<div className="bar" style={{width:(progress/5*100)+"%"}}></div>
</div>
<div style={{textAlign:"center",fontSize:"50px"}}>
{question.correct.emoji}
</div>

<div className="stats">‚ù§Ô∏è {lives}</div>

{question.options.map((opt,i)=>(
<button
key={i}
className={
feedback==="correct" && opt.name===question.correct.name ? "correct":
feedback==="wrong" && opt.name===question.correct.name ? "correct":
"option"
}
onClick={()=>checkAnswer(opt.name)}>
{opt.name}
</button>
))}

<button onClick={()=>speak(question.correct.name)}>
üîä Repeat
</button>

</div>
</div>
);
}

ReactDOM.createRoot(document.getElementById("root")).render(<App/>);

</script>
</body>
</html>
