<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>English Fun Pro - Duolingo Style</title>
<script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<style>
:root{
--bg: linear-gradient(135deg,#a5b4fc,#c4b5fd);
--card:#fff;
--text:#333;
--accent:#6366f1;
--shadow:rgba(0,0,0,0.15);
}
.dark{
--bg:linear-gradient(135deg,#1e293b,#111827);
--card:#111827;
--text:#f3f4f6;
--accent:#8b5cf6;
--shadow:rgba(0,0,0,0.4);
}
body{
margin:0;
font-family:Arial, sans-serif;
background:var(--bg);
color:var(--text);
}
.container{
max-width:700px;
margin:auto;
padding:1rem;
}
.btn{
display:block;
width:100%;
margin: .5rem 0;
padding:12px;
border:none;
border-radius:10px;
font-weight:bold;
background:var(--accent);
color:white;
box-shadow:0 4px 8px var(--shadow);
cursor:pointer;
}
.btn:active{transform:scale(0.97);}
.grid2{display:grid;grid-template-columns:1fr 1fr;gap:8px;}
.progress{height:8px;background:#ddd;border-radius:99px;overflow:hidden;margin-top:8px;}
.fill{height:100%;background:#4ade80;transition:width .4s;}
.badge{background:gold;color:black;padding:4px 8px;border-radius:12px;display:inline-block;margin:2px;}
</style>

</head>
<body>
<div id="root"></div>

<script type="text/babel">
const {useState,useEffect,useRef} = React;

/* ======== VOCABULARY LIST ======== */
const vocab = [
 {word:"Mom",emoji:"ğŸ‘©â€ğŸ¼",phrase:"My mom cooks dinner"},
 {word:"Dad",emoji:"ğŸ‘¨â€ğŸ¼",phrase:"My dad drives the car"},
 {word:"Brother",emoji:"ğŸ‘¦",phrase:"My brother plays football"},
 {word:"Sister",emoji:"ğŸ‘§",phrase:"My sister reads books"},
 {word:"Teacher",emoji:"ğŸ‘©â€ğŸ«",phrase:"The teacher helps us learn"},
 {word:"Friend",emoji:"ğŸ§‘â€ğŸ¤â€ğŸ§‘",phrase:"My friend is kind"},
 {word:"Food",emoji:"ğŸ•",phrase:"I like food"},
 {word:"Rain",emoji:"ğŸŒ§ï¸",phrase:"It is raining today"}
];

/* ======== UTILS ======== */
const shuffle=(arr)=>{let a=[...arr];for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}return a;};

/* ======== MAIN APP ======== */
function App(){
 const [dark,setDark] = useState(false);
 const [screen,setScreen]=useState("menu");
 const [xp,setXp]=useState(()=>parseInt(localStorage.getItem("xp"))||0);
 const [level,setLevel]=useState(()=>parseInt(localStorage.getItem("level"))||1);
 const [energy,setEnergy]=useState(5);
 const [current,setCurrent]=useState(null);
 const [options,setOptions]=useState([]);
 const [input,setInput]=useState("");
 const [message,setMessage]=useState("");
 const audioCtx = useRef(null);

 useEffect(()=>{
   audioCtx.current = new(window.AudioContext||window.webkitAudioContext)();
 },[]);

 useEffect(()=>{localStorage.setItem("xp",xp); localStorage.setItem("level",level);},[xp,level]);

 function speak(text){
   window.speechSynthesis.cancel();
   const u=new SpeechSynthesisUtterance(text);
   u.lang="en-US";
   window.speechSynthesis.speak(u);
 }

 function startLesson(){
   if(energy<=0){setMessage("Not enough energy! ğŸ˜´");return;}
   setEnergy(e=>e-1);
   const correct = vocab[Math.floor(Math.random()*vocab.length)];
   const opts = shuffle([correct,...vocab.filter(v=>v.word!==correct.word)]).slice(0,4);
   setCurrent(correct);
   setOptions(opts);
   setInput("");
   setMessage("");
   setScreen("quiz");
   speak(correct.phrase);
 }

 function check(ans){
   if(!current) return;
   if(ans.trim().toLowerCase()===current.word.toLowerCase()){
     setXp(x=>x+10);
     if(xp+10 >= level*50){
       setLevel(l=>l+1);
       setMessage("Level Up! ğŸ‰");
     } else {
       setMessage("Correct! ğŸ‘");
     }
     startLesson();
   } else {
     setMessage("Try again! ğŸ™ƒ");
   }
 }

 return (
 <div className={`container ${dark?"dark":""}`}>
   <button className="btn" onClick={()=>setDark(d=>!d)}>
     {dark?"â˜€ï¸ Light":"ğŸŒ™ Dark"}
   </button>

   {screen==="menu" && <>
     <h1>English Fun Pro ğŸš€</h1>
     <p>XP: {xp} â€” Level: {level}</p>
     <div className="progress"><div className="fill" style={{width: (xp%(level*50))/(level*50)*100+"%"}}></div></div>
     <p>Energy: {energy} ğŸŒŸ</p>
     <button className="btn" onClick={startLesson}>Start Lesson</button>
     <button className="btn" onClick={()=>setScreen("vocab")}>Vocabulary</button>
   </>}

   {screen==="quiz" && current && <>
     <button className="btn" onClick={()=>setScreen("menu")}>â† Back</button>
     <h2 className="big">{current.emoji}</h2>
     <div className="grid2">
       {options.map(o=>(
         <button key={o.word} className="btn" onClick={()=>check(o.word)}>{o.word}</button>
       ))}
     </div>
     <input 
       className="btn"
       placeholder="Type answer"
       value={input}
       onChange={e=>setInput(e.target.value)}
       onKeyDown={e=>e.key==="Enter"&&check(input)}
     />
     <button className="btn" onClick={()=>check(input)}>Submit</button>
     <button className="btn" onClick={()=>speak(current.phrase)}>ğŸ”Š Listen</button>
     <p>{message}</p>
   </>}

   {screen==="vocab" && <>
     <button className="btn" onClick={()=>setScreen("menu")}>â† Back</button>
     <h2>Vocabulary List</h2>
     {vocab.map(v=>(
       <div key={v.word}>
         {v.emoji} {v.word} â€” <button onClick={()=>speak(v.word)}>ğŸ”Š</button>
       </div>
     ))}
   </>}
 </div>
 );
}

ReactDOM.createRoot(document.getElementById("root")).render(<App/>);
</script>

</body>
</html>
